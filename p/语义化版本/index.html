<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="语义化版本 2.0.0"><title>语义化版本</title><link rel=canonical href=https://ifcat.github.io/p/%E8%AF%AD%E4%B9%89%E5%8C%96%E7%89%88%E6%9C%AC/><link rel=stylesheet href=/scss/style.min.f2f21d9d961219a01621263328d8997e1ae3b4f0371d455628df1fdc27d57bd6.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZL2VG2EDS0"></script><meta property="og:title" content="语义化版本"><meta property="og:description" content="语义化版本 2.0.0"><meta property="og:url" content="https://ifcat.github.io/p/%E8%AF%AD%E4%B9%89%E5%8C%96%E7%89%88%E6%9C%AC/"><meta property="og:site_name" content="ifcat"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="版本"><meta property="article:tag" content="规范"><meta property="article:tag" content="语义化"><meta property="article:published_time" content="2023-09-05T23:45:06+08:00"><meta property="article:modified_time" content="2023-09-05T23:45:06+08:00"><meta property="og:image" content="https://ifcat.github.io/p/%E8%AF%AD%E4%B9%89%E5%8C%96%E7%89%88%E6%9C%AC/cover.jpg"><meta name=twitter:title content="语义化版本"><meta name=twitter:description content="语义化版本 2.0.0"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://ifcat.github.io/p/%E8%AF%AD%E4%B9%89%E5%8C%96%E7%89%88%E6%9C%AC/cover.jpg"><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ZL2VG2EDS0")</script><link rel="shortcut icon" href=/logo.ico><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?94b356c55779771f4768bf760c8bed4c",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu4b3deb5a0e10889504702eeb1e25a2b7_29681_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a>
<span class=emoji>☄️</span></figure><div class=site-meta><h1 class=site-name><a href=/>ifcat</a></h1><h2 class=site-description>IF IS A CAT</h2></div></header><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>首页</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>归档</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>搜索</span></a></li><li><a href=/%E5%85%B3%E4%BA%8E%E6%88%91/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg><span>关于</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>暗色模式</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#摘要>摘要</a></li><li><a href=#简介>简介</a></li><li><a href=#语义化版本控制规范semver>语义化版本控制规范（SemVer）</a></li><li><a href=#合法语义化版本的巴科斯范式语法>合法语义化版本的巴科斯范式语法</a></li><li><a href=#为什么要使用语义化的版本控制>为什么要使用语义化的版本控制？</a></li><li><a href=#faq>FAQ</a><ol><li><a href=#在-0yz-初始开发阶段我该如何进行版本控制>在 0.y.z 初始开发阶段，我该如何进行版本控制？</a></li><li><a href=#如何判断发布-100-版本的时机>如何判断发布 1.0.0 版本的时机？</a></li><li><a href=#这不会阻碍快速开发和迭代吗>这不会阻碍快速开发和迭代吗？</a></li><li><a href=#对于公共-api若即使是最小但不向下兼容的改变都需要产生新的主版本号岂不是很快就达到-4200-版>对于公共 API，若即使是最小但不向下兼容的改变都需要产生新的主版本号，岂不是很快就达到 42.0.0 版？</a></li><li><a href=#为整个公共-api-写文档太费事了>为整个公共 API 写文档太费事了！</a></li><li><a href=#万一不小心把一个不兼容的改版当成了次版本号发行了该怎么办>万一不小心把一个不兼容的改版当成了次版本号发行了该怎么办？</a></li><li><a href=#如果我更新了自己的依赖但没有改变公共-api-该怎么办>如果我更新了自己的依赖但没有改变公共 API 该怎么办？</a></li><li><a href=#如果我变更了公共-api-但无意中未遵循版本号的改动怎么办呢意即在修订等级的发布中误将重大且不兼容的改变加到代码之中>如果我变更了公共 API 但无意中未遵循版本号的改动怎么办呢？（意即在修订等级的发布中，误将重大且不兼容的改变加到代码之中）</a></li><li><a href=#我该如何处理即将弃用的功能>我该如何处理即将弃用的功能？</a></li><li><a href=#语义化版本对于版本的字符串长度是否有限制呢>语义化版本对于版本的字符串长度是否有限制呢？</a></li><li><a href=#v123-是一个语义化版本号吗>“v1.2.3” 是一个语义化版本号吗？</a></li><li><a href=#是否有推荐的正则表达式用以检查语义化版本号的正确性>是否有推荐的正则表达式用以检查语义化版本号的正确性？</a></li></ol></li><li><a href=#关于>关于</a></li><li><a href=#许可证>许可证</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/%E8%AF%AD%E4%B9%89%E5%8C%96%E7%89%88%E6%9C%AC/><img src=/p/%E8%AF%AD%E4%B9%89%E5%8C%96%E7%89%88%E6%9C%AC/cover_huc1dd60740e8030901c16d7545c3ee840_806028_800x0_resize_q75_box.jpg srcset="/p/%E8%AF%AD%E4%B9%89%E5%8C%96%E7%89%88%E6%9C%AC/cover_huc1dd60740e8030901c16d7545c3ee840_806028_800x0_resize_q75_box.jpg 800w, /p/%E8%AF%AD%E4%B9%89%E5%8C%96%E7%89%88%E6%9C%AC/cover_huc1dd60740e8030901c16d7545c3ee840_806028_1600x0_resize_q75_box.jpg 1600w" width=800 height=450 loading=lazy alt="Featured image of post 语义化版本"></a></div><div class=article-details><header class=article-category><a href=/categories/%E6%8C%87%E5%8C%97/>指北</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/%E8%AF%AD%E4%B9%89%E5%8C%96%E7%89%88%E6%9C%AC/>语义化版本</a></h2><h3 class=article-subtitle>语义化版本 2.0.0</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>2023-09-05</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>阅读时长: 11 分钟</time></div></footer></div></header><section class=article-content><h1 id=语义化版本-200>语义化版本 2.0.0</h1><h2 id=摘要>摘要</h2><p>版本格式：主版本号.次版本号.修订号，版本号递增规则如下：</p><ol><li>主版本号：当你做了不兼容的 API 修改，</li><li>次版本号：当你做了向下兼容的功能性新增，</li><li>修订号：当你做了向下兼容的问题修正。</li></ol><p>先行版本号及版本编译信息可以加到“主版本号.次版本号.修订号”的后面，作为延伸。</p><h2 id=简介>简介</h2><p>在软件管理的领域里存在着被称作“依赖地狱”的死亡之谷，系统规模越大，加入的包越多，你就越有可能在未来的某一天发现自己已深陷绝望之中。</p><p>在依赖高的系统中发布新版本包可能很快会成为噩梦。如果依赖关系过高，可能面临版本控制被锁死的风险（必须对每一个依赖包改版才能完成某次升级）。而如果依赖关系过于松散，又将无法避免版本的混乱（假设兼容于未来的多个版本已超出了合理数量）。当你项目的进展因为版本依赖被锁死或版本混乱变得不够简便和可靠，就意味着你正处于依赖地狱之中。</p><p>作为这个问题的解决方案之一，我提议用一组简单的规则及条件来约束版本号的配置和增长。这些规则是根据（但不局限于）已经被各种封闭、开放源码软件所广泛使用的惯例所设计。为了让这套理论运作，你必须先有定义好的公共 API。这可能包括文档或代码的强制要求。无论如何，这套 API 的清楚明了是十分重要的。一旦你定义了公共 API，你就可以透过修改相应的版本号来向大家说明你的修改。考虑使用这样的版本号格式：X.Y.Z（主版本号.次版本号.修订号）修复问题但不影响 API 时，递增修订号；API 保持向下兼容的新增及修改时，递增次版本号；进行不向下兼容的修改时，递增主版本号。</p><p>我称这套系统为“语义化的版本控制”，在这套约定下，版本号及其更新方式包含了相邻版本间的底层代码和修改内容的信息。</p><h2 id=语义化版本控制规范semver>语义化版本控制规范（SemVer）</h2><p>以下关键词 MUST、MUST NOT、REQUIRED、SHALL、SHALL NOT、SHOULD、SHOULD NOT、 RECOMMENDED、MAY、OPTIONAL 依照 RFC 2119 的叙述解读。</p><ol><li><p>使用语义化版本控制的软件必须（MUST）定义公共 API。该 API 可以在代码中被定义或出现于严谨的文档内。无论何种形式都应该力求精确且完整。</p></li><li><p>标准的版本号必须（MUST）采用 X.Y.Z 的格式，其中 X、Y 和 Z 为非负的整数，且禁止（MUST NOT）在数字前方补零。X 是主版本号、Y 是次版本号、而 Z 为修订号。每个元素必须（MUST）以数值来递增。例如：1.9.1 -> 1.10.0 -> 1.11.0。</p></li><li><p>标记版本号的软件发行后，禁止（MUST NOT）改变该版本软件的内容。任何修改都必须（MUST）以新版本发行。</p></li><li><p>主版本号为零（0.y.z）的软件处于开发初始阶段，一切都可能随时被改变。这样的公共 API 不应该被视为稳定版。</p></li><li><p>1.0.0 的版本号用于界定公共 API 的形成。这一版本之后所有的版本号更新都基于公共 API 及其修改内容。</p></li><li><p>修订号 Z（x.y.Z <code>|</code> x > 0）必须（MUST）在只做了向下兼容的修正时才递增。这里的修正指的是针对不正确结果而进行的内部修改。</p></li><li><p>次版本号 Y（x.Y.z <code>|</code> x > 0）必须（MUST）在有向下兼容的新功能出现时递增。在任何公共 API 的功能被标记为弃用时也必须（MUST）递增。也可以（MAY）在内部程序有大量新功能或改进被加入时递增，其中可以（MAY）包括修订级别的改变。每当次版本号递增时，修订号必须（MUST）归零。</p></li><li><p>主版本号 X（X.y.z <code>|</code> X > 0）必须（MUST）在有任何不兼容的修改被加入公共 API 时递增。其中可以（MAY）包括次版本号及修订级别的改变。每当主版本号递增时，次版本号和修订号必须（MUST）归零。</p></li><li><p>先行版本号可以（MAY）被标注在修订版之后，先加上一个连接号再加上一连串以句点分隔的标识符来修饰。标识符必须（MUST）由 ASCII 字母数字和连接号 [0-9A-Za-z-] 组成，且禁止（MUST NOT）留白。数字型的标识符禁止（MUST NOT）在前方补零。先行版的优先级低于相关联的标准版本。被标上先行版本号则表示这个版本并非稳定而且可能无法满足预期的兼容性需求。范例：1.0.0-alpha、1.0.0-alpha.1、1.0.0-0.3.7、1.0.0-x.7.z.92。</p></li><li><p>版本编译信息可以（MAY）被标注在修订版或先行版本号之后，先加上一个加号再加上一连串以句点分隔的标识符来修饰。标识符必须（MUST）由 ASCII 字母数字和连接号 [0-9A-Za-z-] 组成，且禁止（MUST NOT）留白。当判断版本的优先层级时，版本编译信息可（SHOULD）被忽略。因此当两个版本只有在版本编译信息有差别时，属于相同的优先层级。范例：1.0.0-alpha+001、1.0.0+20130313144700、1.0.0-beta+exp.sha.5114f85。</p></li><li><p>版本的优先层级指的是不同版本在排序时如何比较。</p><ol><li><p>判断优先层级时，必须（MUST）把版本依序拆分为主版本号、次版本号、修订号及先行版本号后进行比较（版本编译信息不在这份比较的列表中）。</p></li><li><p>由左到右依序比较每个标识符，第一个差异值用来决定优先层级：主版本号、次版本号及修订号以数值比较。</p><p>例如：1.0.0 &lt; 2.0.0 &lt; 2.1.0 &lt; 2.1.1。</p></li><li><p>当主版本号、次版本号及修订号都相同时，改以优先层级比较低的先行版本号决定。</p><p>例如：1.0.0-alpha &lt; 1.0.0。</p></li><li><p>有相同主版本号、次版本号及修订号的两个先行版本号，其优先层级必须（MUST）透过由左到右的每个被句点分隔的标识符来比较，直到找到一个差异值后决定：</p><ol><li><p>只有数字的标识符以数值高低比较。</p></li><li><p>有字母或连接号时则逐字以 ASCII 的排序来比较。</p></li><li><p>数字的标识符比非数字的标识符优先层级低。</p></li><li><p>若开头的标识符都相同时，栏位比较多的先行版本号优先层级比较高。</p></li></ol><p>例如：1.0.0-alpha &lt; 1.0.0-alpha.1 &lt; 1.0.0-alpha.beta &lt; 1.0.0-beta &lt; 1.0.0-beta.2 &lt; 1.0.0-beta.11 &lt; 1.0.0-rc.1 &lt; 1.0.0。</p></li></ol></li></ol><h2 id=合法语义化版本的巴科斯范式语法>合法语义化版本的巴科斯范式语法</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;valid semver&gt; ::= &lt;version core&gt;
</span></span><span class=line><span class=cl>                 | &lt;version core&gt; &#34;-&#34; &lt;pre-release&gt;
</span></span><span class=line><span class=cl>                 | &lt;version core&gt; &#34;+&#34; &lt;build&gt;
</span></span><span class=line><span class=cl>                 | &lt;version core&gt; &#34;-&#34; &lt;pre-release&gt; &#34;+&#34; &lt;build&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&lt;version core&gt; ::= &lt;major&gt; &#34;.&#34; &lt;minor&gt; &#34;.&#34; &lt;patch&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&lt;major&gt; ::= &lt;numeric identifier&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&lt;minor&gt; ::= &lt;numeric identifier&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&lt;patch&gt; ::= &lt;numeric identifier&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&lt;pre-release&gt; ::= &lt;dot-separated pre-release identifiers&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&lt;dot-separated pre-release identifiers&gt; ::= &lt;pre-release identifier&gt;
</span></span><span class=line><span class=cl>                                          | &lt;pre-release identifier&gt; &#34;.&#34; &lt;dot-separated pre-release identifiers&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&lt;build&gt; ::= &lt;dot-separated build identifiers&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&lt;dot-separated build identifiers&gt; ::= &lt;build identifier&gt;
</span></span><span class=line><span class=cl>                                    | &lt;build identifier&gt; &#34;.&#34; &lt;dot-separated build identifiers&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&lt;pre-release identifier&gt; ::= &lt;alphanumeric identifier&gt;
</span></span><span class=line><span class=cl>                           | &lt;numeric identifier&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&lt;build identifier&gt; ::= &lt;alphanumeric identifier&gt;
</span></span><span class=line><span class=cl>                     | &lt;digits&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&lt;alphanumeric identifier&gt; ::= &lt;non-digit&gt;
</span></span><span class=line><span class=cl>                            | &lt;non-digit&gt; &lt;identifier characters&gt;
</span></span><span class=line><span class=cl>                            | &lt;identifier characters&gt; &lt;non-digit&gt;
</span></span><span class=line><span class=cl>                            | &lt;identifier characters&gt; &lt;non-digit&gt; &lt;identifier characters&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&lt;numeric identifier&gt; ::= &#34;0&#34;
</span></span><span class=line><span class=cl>                       | &lt;positive digit&gt;
</span></span><span class=line><span class=cl>                       | &lt;positive digit&gt; &lt;digits&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&lt;identifier characters&gt; ::= &lt;identifier character&gt;
</span></span><span class=line><span class=cl>                          | &lt;identifier character&gt; &lt;identifier characters&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&lt;identifier character&gt; ::= &lt;digit&gt;
</span></span><span class=line><span class=cl>                         | &lt;non-digit&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&lt;non-digit&gt; ::= &lt;letter&gt;
</span></span><span class=line><span class=cl>              | &#34;-&#34;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&lt;digits&gt; ::= &lt;digit&gt;
</span></span><span class=line><span class=cl>           | &lt;digit&gt; &lt;digits&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&lt;digit&gt; ::= &#34;0&#34;
</span></span><span class=line><span class=cl>          | &lt;positive digit&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&lt;positive digit&gt; ::= &#34;1&#34; | &#34;2&#34; | &#34;3&#34; | &#34;4&#34; | &#34;5&#34; | &#34;6&#34; | &#34;7&#34; | &#34;8&#34; | &#34;9&#34;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&lt;letter&gt; ::= &#34;A&#34; | &#34;B&#34; | &#34;C&#34; | &#34;D&#34; | &#34;E&#34; | &#34;F&#34; | &#34;G&#34; | &#34;H&#34; | &#34;I&#34; | &#34;J&#34;
</span></span><span class=line><span class=cl>           | &#34;K&#34; | &#34;L&#34; | &#34;M&#34; | &#34;N&#34; | &#34;O&#34; | &#34;P&#34; | &#34;Q&#34; | &#34;R&#34; | &#34;S&#34; | &#34;T&#34;
</span></span><span class=line><span class=cl>           | &#34;U&#34; | &#34;V&#34; | &#34;W&#34; | &#34;X&#34; | &#34;Y&#34; | &#34;Z&#34; | &#34;a&#34; | &#34;b&#34; | &#34;c&#34; | &#34;d&#34;
</span></span><span class=line><span class=cl>           | &#34;e&#34; | &#34;f&#34; | &#34;g&#34; | &#34;h&#34; | &#34;i&#34; | &#34;j&#34; | &#34;k&#34; | &#34;l&#34; | &#34;m&#34; | &#34;n&#34;
</span></span><span class=line><span class=cl>           | &#34;o&#34; | &#34;p&#34; | &#34;q&#34; | &#34;r&#34; | &#34;s&#34; | &#34;t&#34; | &#34;u&#34; | &#34;v&#34; | &#34;w&#34; | &#34;x&#34;
</span></span><span class=line><span class=cl>           | &#34;y&#34; | &#34;z&#34;
</span></span></code></pre></td></tr></table></div></div><h2 id=为什么要使用语义化的版本控制>为什么要使用语义化的版本控制？</h2><p>这并不是一个新的或者革命性的想法。实际上，你可能已经在做一些近似的事情了。问题在于只是“近似”还不够。如果没有某个正式的规范可循，版本号对于依赖的管理并无实质意义。将上述的想法命名并给予清楚的定义，让你对软件使用者传达意向变得容易。一旦这些意向变得清楚，弹性（但又不会太弹性）的依赖规范就能达成。</p><p>举个简单的例子就可以展示语义化的版本控制如何让依赖地狱成为过去。假设有个名为“救火车”的函数库，它需要另一个名为“梯子”并已经有使用语义化版本控制的包。当救火车创建时，梯子的版本号为 3.1.0。因为救火车使用了一些版本 3.1.0 所新增的功能，你可以放心地指定依赖于梯子的版本号大于等于 3.1.0 但小于 4.0.0。这样，当梯子版本 3.1.1 和 3.2.0 发布时，你可以将直接它们纳入你的包管理系统，因为它们能与原有依赖的软件兼容。</p><p>作为一位负责任的开发者，你理当确保每次包升级的运作与版本号的表述一致。现实世界是复杂的，我们除了提高警觉外能做的不多。你所能做的就是让语义化的版本控制为你提供一个健全的方式来发行以及升级包，而无需推出新的依赖包，节省你的时间及烦恼。</p><p>如果你对此认同，希望立即开始使用语义化版本控制，你只需声明你的函数库正在使用它并遵循这些规则就可以了。请在你的 README 文件中保留此页链接，让别人也知道这些规则并从中受益。</p><h2 id=faq>FAQ</h2><h3 id=在-0yz-初始开发阶段我该如何进行版本控制>在 0.y.z 初始开发阶段，我该如何进行版本控制？</h3><p>最简单的做法是以 0.1.0 作为你的初始化开发版本，并在后续的每次发行时递增次版本号。</p><h3 id=如何判断发布-100-版本的时机>如何判断发布 1.0.0 版本的时机？</h3><p>当你的软件被用于正式环境，它应该已经达到了 1.0.0 版。如果你已经有个稳定的 API 被使用者依赖，也会是 1.0.0 版。如果你很担心向下兼容的问题，也应该算是 1.0.0 版了。</p><h3 id=这不会阻碍快速开发和迭代吗>这不会阻碍快速开发和迭代吗？</h3><p>主版本号为零的时候就是为了做快速开发。如果你每天都在改变 API，那么你应该仍在主版本号为零的阶段（0.y.z），或是正在下个主版本的独立开发分支中。</p><h3 id=对于公共-api若即使是最小但不向下兼容的改变都需要产生新的主版本号岂不是很快就达到-4200-版>对于公共 API，若即使是最小但不向下兼容的改变都需要产生新的主版本号，岂不是很快就达到 42.0.0 版？</h3><p>这是开发的责任感和前瞻性的问题。不兼容的改变不应该轻易被加入到有许多依赖代码的软件中。升级所付出的代价可能是巨大的。要递增主版本号来发行不兼容的改版，意味着你必须为这些改变所带来的影响深思熟虑，并且评估所涉及的成本及效益比。</p><h3 id=为整个公共-api-写文档太费事了>为整个公共 API 写文档太费事了！</h3><p>为供他人使用的软件编写适当的文档，是你作为一名专业开发者应尽的职责。保持项目高效的一个非常重要的部份是掌控软件的复杂度，如果没有人知道如何使用你的软件或不知道哪些函数的调用是可靠的，要掌控复杂度会是困难的。长远来看，使用语义化版本控制以及对于公共 API 有良好规范的坚持，可以让每个人及每件事都运行顺畅。</p><h3 id=万一不小心把一个不兼容的改版当成了次版本号发行了该怎么办>万一不小心把一个不兼容的改版当成了次版本号发行了该怎么办？</h3><p>一旦发现自己破坏了语义化版本控制的规范，就要修正这个问题，并发行一个新的次版本号来更正这个问题并且恢复向下兼容。即使是这种情况，也不能去修改已发行的版本。可以的话，将有问题的版本号记录到文档中，告诉使用者问题所在，让他们能够意识到这是有问题的版本。</p><h3 id=如果我更新了自己的依赖但没有改变公共-api-该怎么办>如果我更新了自己的依赖但没有改变公共 API 该怎么办？</h3><p>由于没有影响到公共 API，这可以被认定是兼容的。若某个软件和你的包有共同依赖，则它会有自己的依赖规范，作者也会告知可能的冲突。要判断改版是属于修订等级或是次版等级，是依据你更新的依赖关系是为了修复问题或是加入新功能。对于后者，我经常会预期伴随着更多的代码，这显然会是一个次版本号级别的递增。</p><h3 id=如果我变更了公共-api-但无意中未遵循版本号的改动怎么办呢意即在修订等级的发布中误将重大且不兼容的改变加到代码之中>如果我变更了公共 API 但无意中未遵循版本号的改动怎么办呢？（意即在修订等级的发布中，误将重大且不兼容的改变加到代码之中）</h3><p>自行做最佳的判断。如果你有庞大的使用者群在依照公共 API 的意图而变更行为后会大受影响，那么最好做一次主版本的发布，即使严格来说这个修复仅是修订等级的发布。记住， 语义化的版本控制就是透过版本号的改变来传达意义。若这些改变对你的使用者是重要的，那就透过版本号来向他们说明。</p><h3 id=我该如何处理即将弃用的功能>我该如何处理即将弃用的功能？</h3><p>弃用现存的功能是软件开发中的家常便饭，也通常是向前发展所必须的。当你弃用部份公共 API 时，你应该做两件事：（1）更新你的文档让使用者知道这个改变，（2）在适当的时机将弃用的功能透过新的次版本号发布。在新的主版本完全移除弃用功能前，至少要有一个次版本包含这个弃用信息，这样使用者才能平顺地转移到新版 API。</p><h3 id=语义化版本对于版本的字符串长度是否有限制呢>语义化版本对于版本的字符串长度是否有限制呢？</h3><p>没有，请自行做适当的判断。举例来说，长到 255 个字符的版本已过度夸张。再者，特定的系统对于字符串长度可能会有他们自己的限制。</p><h3 id=v123-是一个语义化版本号吗>“v1.2.3” 是一个语义化版本号吗？</h3><p>“v1.2.3” 并不是的一个语义化的版本号。但是，在语义化版本号之前增加前缀 “v” 是用来表示版本号的常用做法。在版本控制系统中，将 “version” 缩写为 “v” 是很常见的。比如：<code>git tag v1.2.3 -m "Release version 1.2.3"</code> 中，“v1.2.3” 表示标签名称，而 “1.2.3” 是语义化版本号。</p><h3 id=是否有推荐的正则表达式用以检查语义化版本号的正确性>是否有推荐的正则表达式用以检查语义化版本号的正确性？</h3><p>有两个推荐的正则表达式。第一个用于支持按组名称提取的语言（PCRE[Perl 兼容正则表达式，比如 Perl、PHP 和 R]、Python 和 Go）。</p><p>参见：<a class=link href=https://regex101.com/r/Ly7O1x/3/ target=_blank rel=noopener>https://regex101.com/r/Ly7O1x/3/</a></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>^(?P&lt;major&gt;0|[1-9]\d*)\.(?P&lt;minor&gt;0|[1-9]\d*)\.(?P&lt;patch&gt;0|[1-9]\d*)(?:-(?P&lt;prerelease&gt;(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+(?P&lt;buildmetadata&gt;[0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$
</span></span></code></pre></td></tr></table></div></div><p>第二个用于支持按编号提取的语言（与第一个对应的提取项按顺序分别为：major、minor、patch、prerelease、buildmetadata）。主要包括 ECMA Script（JavaScript）、PCRE（Perl 兼容正则表达式，比如 Perl、PHP 和 R）、Python 和 Go。
参见：<a class=link href=https://regex101.com/r/vkijKf/1/ target=_blank rel=noopener>https://regex101.com/r/vkijKf/1/</a></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$
</span></span></code></pre></td></tr></table></div></div><h2 id=关于>关于</h2><p>语义化版本控制的规范是由 Gravatars 创办者兼 GitHub 共同创办者 <a class=link href=http://tom.preston-werner.com target=_blank rel=noopener>Tom Preston-Werner</a> 所建立。</p><p>如果您有任何建议，请到 <a class=link href=https://github.com/semver/semver/issues target=_blank rel=noopener>GitHub 上提出您的问题</a>。</p><h2 id=许可证>许可证</h2><p><a class=link href=http://creativecommons.org/licenses/by/3.0/ target=_blank rel=noopener>知识共享 署名 3.0 (CC BY 3.0)</a></p></section><footer class=article-footer><section class=article-tags><a href=/tags/%E7%89%88%E6%9C%AC/>版本</a>
<a href=/tags/%E8%A7%84%E8%8C%83/>规范</a>
<a href=/tags/%E8%AF%AD%E4%B9%89%E5%8C%96/>语义化</a></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css integrity="sha256-J+iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s=" crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js integrity="sha256-InsNdER1b2xUewP+pKCUJpkhiqwHgqiPXDlIk7GzBu4=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI=" crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.querySelector(`.article-content`),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],ignoredClasses:["gist"]})})</script></article><aside class=related-content--wrapper><h2 class=section-title>相关文章</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/%E4%B8%AD%E6%96%87%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%E6%8E%92%E7%89%88%E6%8C%87%E5%8D%97/><div class=article-image><img src=/p/%E4%B8%AD%E6%96%87%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%E6%8E%92%E7%89%88%E6%8C%87%E5%8D%97/cover.456b8b62f4e93ff289a0752cb9a275a0_hu90219446d80d749710387d3680557fc5_2213423_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy alt="Featured image of post 中文技术文档排版指南" data-hash="md5-RWuLYvTpP/KJoHUsuaJ1oA=="></div><div class=article-details><h2 class=article-title>中文技术文档排版指南</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2020 -
2023 ifcat</section><section class=powerby>IF IS A CAT<br></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>